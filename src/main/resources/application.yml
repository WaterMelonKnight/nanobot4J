# Spring Boot Configuration
spring:
  application:
    name: nanobot4j

  # Server Configuration
  server:
    port: 8080

  # Database Configuration (H2)
  datasource:
    url: jdbc:h2:file:./data/nanobot4j;AUTO_SERVER=TRUE
    driver-class-name: org.h2.Driver
    username: sa
    password:

  # JPA Configuration
  jpa:
    database-platform: org.hibernate.dialect.H2Dialect
    hibernate:
      ddl-auto: update
    show-sql: false
    properties:
      hibernate:
        format_sql: true

  # H2 Console (for development)
  h2:
    console:
      enabled: true
      path: /h2-console

  # Jackson Configuration
  jackson:
    serialization:
      write-dates-as-timestamps: false
    time-zone: UTC

# ============================================
# Multi-Model LLM Configuration
# ============================================
nanobot:
  llm:
    # 默认使用的模型
    default-model: deepseek

    # 多模型配置
    models:
      # DeepSeek 配置
      deepseek:
        enabled: true
        provider: openai-compatible
        base-url: https://api.deepseek.com/v1
        api-key: ${DEEPSEEK_API_KEY:your-deepseek-api-key}
        model: deepseek-chat
        temperature: 0.7
        max-tokens: 4096
        timeout-ms: 30000

      # Kimi (Moonshot) 配置
      kimi:
        enabled: true
        provider: openai-compatible
        base-url: https://api.moonshot.cn/v1
        api-key: ${KIMI_API_KEY:your-kimi-api-key}
        model: moonshot-v1-8k
        temperature: 0.7
        max-tokens: 8000
        timeout-ms: 30000

      # Ollama 本地模型配置
      ollama:
        enabled: true
        provider: ollama
        base-url: http://localhost:11434
        model: bitnet
        temperature: 0.7
        timeout-ms: 60000
        prompt-template: chatML

      # OpenAI 配置（可选）
      openai:
        enabled: false
        provider: openai-compatible
        base-url: https://api.openai.com/v1
        api-key: ${OPENAI_API_KEY:your-openai-api-key}
        model: gpt-4
        temperature: 0.7
        max-tokens: 4096
        timeout-ms: 30000

    # 降级策略配置
    fallback:
      enabled: true
      # 降级顺序：优先本地，然后 DeepSeek，最后 Kimi
      order:
        - ollama
        - deepseek
        - kimi

# ============================================
# Logging Configuration
# ============================================
logging:
  level:
    com.nanobot: INFO
    com.nanobot.llm: DEBUG
    org.springframework.ai: INFO
    org.hibernate.SQL: DEBUG
    org.hibernate.type.descriptor.sql.BasicBinder: TRACE

# ============================================
# Agent Configuration
# ============================================
  agent:
    max-iterations: 10
    context-window-size: 100
    enable-tool-logging: true
